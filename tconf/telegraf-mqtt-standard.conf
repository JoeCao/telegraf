[agent]
  interval = "30s"
  round_interval = true

[[inputs.snmp]]
  agents = ["localhost:161"]
  version = 2
  community = "public"
  interval = "30s"

  [[inputs.snmp.field]]
    name = "system_uptime"
    oid = "1.3.6.1.2.1.1.3.0"

  [[inputs.snmp.field]]
    name = "system_name"
    oid = "1.3.6.1.2.1.1.5.0"

  [[inputs.snmp.table]]
    name = "interface"
    oid = "1.3.6.1.2.1.2.2"
    [[inputs.snmp.table.field]]
      name = "ifDescr"
      oid = "1.3.6.1.2.1.2.2.1.2"
      is_tag = true
    [[inputs.snmp.table.field]]
      name = "ifInOctets"
      oid = "1.3.6.1.2.1.2.2.1.10"

# MQTT 输出 - 默认 InfluxDB 行协议格式
[[outputs.mqtt]]
  servers = ["tcp://localhost:1883"]
  topic = "telegraf/influx/{{ .Name }}"
  # data_format = "influx"  # 这是默认格式
  client_id = "telegraf-influx"

# MQTT 输出 - JSON 格式
[[outputs.mqtt]]
  servers = ["tcp://localhost:1883"]
  topic = "telegraf/json/{{ .Name }}"
  data_format = "json"
  client_id = "telegraf-json"

# MQTT 输出 - CSV 格式
[[outputs.mqtt]]
  servers = ["tcp://localhost:1883"]
  topic = "telegraf/csv/{{ .Name }}"
  data_format = "csv"
  client_id = "telegraf-csv"

# 调试输出到文件
[[outputs.file]]
  files = ["stdout"]
  data_format = "json"